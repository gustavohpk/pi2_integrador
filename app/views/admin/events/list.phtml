<script type="text/javascript">
	function pesquisa(findBy){
		document.location.href = "<?= createUriFor('/admin/eventos/lista/'); ?>" + findBy + "/" + textPesquisa.value;
	}
</script>

<div class="col-xs-12 col-sm-12 col-md-10 col-md-offset-1 col-lg-10 col-lg-offset-1 events-list">
	<div class="panel panel-default">
		<div class="panel-heading">
	    <h3 class="panel-title">Lista de eventos cadastrados</h3>
	  </div>
	  <div class="panel-body">
	  	<span class="glyphicon glyphicon-question-sign" style="float:right;"></span>
			<div class="row">
				<div class="col-xs-12 general-actions">
					<a href="<?= createUriFor('/admin/eventos/novo')?>">
						<button class="btn btn-success btn-sm" title="Cadastrar" style="float: left"><span class="glyphicon glyphicon-plus-sign"></span></button>
					</a>
					<div class="col-lg-4">
						<form id="pesquisa" method="GET" action="<?= createUriFor('/admin/eventos/lista')?>">
							<div class="input-group">
								<input type="text" id="textPesquisa" class="form-control">
									<div class="input-group-btn">
									  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" title="Procurar"><span class="glyphicon glyphicon-search"></span> <span class="caret"></span></button>
									  <ul class="dropdown-menu pull-right">
									  <li><a href="javascript:pesquisa('id');">ID</a></li>
									  <li><a href="javascript:pesquisa('nome');">Nome</a></li>
									  <li><a href="">Tipo</a></li>
									  <li><a href="#">Data de início</a></li>
									  <li><a href="#">Data do final</a></li>
									  <li><a href="#">Ministrante</a></li>
									  <li><a href="#">Local</a></li>
									</ul>
								</div>
							</div>
						</form>
					</div>
					<div class="" style="float:right; font-size: 10px;"><a href="<?= createUriFor('/eventos/proximos')?>" target="blank">Acessar a página PRÓXIMOS EVENTOS <span class="glyphicon glyphicon-new-window"></span></a></div><br/>
					<div class="" style="float:right; font-size: 10px;"><a href="<?= createUriFor('/eventos/anteriores')?>" target="blank">Acessar a página EVENTOS ANTERIORES <span class="glyphicon glyphicon-new-window"></span></a></div>
				</div>
			</div>
		</div>
		<table class="table">
			<tr>
				<th>ID</th>
				<th>Nome</th>
				<th>Tipo</th>
				<th>Ações</th>
			</tr>
			<?php foreach ($this->events as $event) : ?>
				<tr>
					<td align="right"><?= $event->getIdEvent() ?></td>
					<td align="left"><?= $event->getName() ?></td>
					<?php if ($event->isSubEvent()) : ?>
						<td align="left"><?= $event->getEventType() ?><span class="badge pull-right"><span class="glyphicon glyphicon-link" title="Subevento"></span></span></td>
					<?php else : ?>
						<td align="left"><?= $event->getEventType()?></td>
					<?php endif; ?>					
					<td>
						<a href="<?= createUriFor("/admin/eventos/{$event->getIdEvent()}/alterar") ?>">
							<button class='btn btn-primary btn-sm' title='Editar'>
								<span class='glyphicon glyphicon-edit'></span>
							</button>
						</a>
						<a href="<?= createUriFor("/admin/eventos/{$event->getIdEvent()}/remover") ?>">
							<button class='btn btn-danger btn-sm' title='Excluir'>
								<span class='glyphicon glyphicon-trash'></span>
							</button>
						</a>
					</td>					
				</tr>
			<?php endforeach; ?>
		</table>
		<div class="panel-footer">
			<div class="row">
				<div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-6 col-lg-offset-3">
					<select class="form-control">
						<option selected>Exibir no máximo 10 itens por página</option>
						<option>Exibir no máximo 20 itens por página</option>
						<option>Exibir no máximo 40 itens por página</option>
					</select>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-12">
					<ul class="pagination">
					  <?php echo $this->pagination->getPageAnchors("{$this->getUri('admin/eventos/lista')}");?>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>